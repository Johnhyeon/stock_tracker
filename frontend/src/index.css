@import url('https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css');
@import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=Space+Grotesk:wght@500;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  html {
    overflow-y: scroll; /* 스크롤바 항상 표시 → 차트 펼칠 때 뷰포트 폭 흔들림 방지 */
  }
  body {
    @apply bg-gray-50 text-gray-900 dark:bg-t-bg dark:text-t-text-primary;
    transition: background-color 0.3s ease, color 0.3s ease;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  }
}

/* 스크롤바 - 다크 OLED */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  @apply bg-transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-300 dark:bg-t-border-hover rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-400 dark:bg-t-border-active;
}

@layer utilities {
  /* 트레이딩 숫자용 tabular-nums */
  .font-trading-num {
    font-variant-numeric: tabular-nums;
    font-family: 'Fira Code', monospace;
  }

  /* 미세 글로우 텍스트 */
  .glow-text {
    text-shadow: 0 0 8px currentColor;
  }

  /* 글로우 보더 */
  .glow-border {
    box-shadow: 0 0 8px 1px rgba(245, 158, 11, 0.1);
  }
}

/* 네이티브 select option 다크모드 */
.dark select option {
  background-color: #1a1a28;
  color: #e2e8f0;
}

.dark select option:checked {
  background-color: #2a2a3d;
}

/* 마켓 티커 마키 스크롤 */
.ticker-wrapper {
  mask-image: linear-gradient(to right, transparent, black 2%, black 98%, transparent);
  -webkit-mask-image: linear-gradient(to right, transparent, black 2%, black 98%, transparent);
}

.ticker-scroll {
  animation: ticker-slide 30s linear infinite;
}

.ticker-scroll:hover {
  animation-play-state: paused;
}

@keyframes ticker-slide {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

/* 차트가 있는 페이지에서 GPU 부하 애니메이션 정지 */
body:has(.stock-chart-wrapper) .ticker-scroll {
  animation-play-state: paused;
}

body:has(.stock-chart-wrapper) .animate-pulse-live {
  animation: none;
}

/* 차트 캔버스 격리 */
.stock-chart-wrapper {
  contain: layout style paint;
  isolation: isolate;
}

/* 테이블 내 차트 레이아웃 루프 방지 */
.chart-grid-cell {
  min-width: 0;
  overflow: hidden;
}

/* prefers-reduced-motion: 애니메이션 비활성화 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

.landing-shell {
  position: relative;
  overflow: hidden;
  font-family: 'Plus Jakarta Sans', 'Pretendard Variable', sans-serif;
  background:
    radial-gradient(120% 80% at 10% 5%, rgba(6, 182, 212, 0.35), transparent 45%),
    radial-gradient(90% 70% at 90% 0%, rgba(56, 189, 248, 0.28), transparent 42%),
    linear-gradient(135deg, #020617 0%, #0f172a 45%, #082f49 100%);
}

.landing-title {
  font-family: 'Space Grotesk', 'Pretendard Variable', sans-serif;
  letter-spacing: -0.03em;
}

.landing-grid {
  background-image:
    linear-gradient(rgba(148, 163, 184, 0.09) 1px, transparent 1px),
    linear-gradient(90deg, rgba(148, 163, 184, 0.09) 1px, transparent 1px);
  background-size: 42px 42px;
  mask-image: radial-gradient(circle at 50% 20%, black 20%, transparent 75%);
}

.landing-float {
  animation: landing-float 7s ease-in-out infinite;
}

@keyframes landing-float {
  0% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
  100% { transform: translateY(0); }
}
